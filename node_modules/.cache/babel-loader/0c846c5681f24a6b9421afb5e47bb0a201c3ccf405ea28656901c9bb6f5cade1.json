{"ast":null,"code":"import _regeneratorRuntime from\"/Users/syedabbasali/Desktop/IndividualProject/submission/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/syedabbasali/Desktop/IndividualProject/submission/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/syedabbasali/Desktop/IndividualProject/submission/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import classes from'./UserProfile.module.css';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ItemUpload(){var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var ref=React.useRef();var username=JSON.parse(localStorage.getItem('userProfile'));var handleUploadClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var formData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:formData=new FormData();formData.append('file',file);// ðŸ‘‡ Uploading the file using the fetch API to the server\n_context.next=4;return fetch(\"http://54.174.0.81:8080/shop/upload_item_list/username=\".concat(username.username,\"/password=\").concat(username.password),{method:'POST',body:formData// ðŸ‘‡ Set headers manually for single file upload\n}).then(function(response){if(response.status===200){ref.current.value=\"\";alert(\"Items Successfully uploaded.\");history.replace('/profile');}}).then(function(data){return console.log(file);}).catch(function(err){return console.error(err);});case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleUploadClick(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Items Upload\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(e){return setFile(e.target.files[0]);},ref:ref}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:classes.action,children:/*#__PURE__*/_jsx(\"button\",{onClick:handleUploadClick,children:\"Upload\"})})]})]});}export default ItemUpload;","map":{"version":3,"names":["React","useState","classes","useHistory","ItemUpload","history","file","setFile","ref","useRef","username","JSON","parse","localStorage","getItem","handleUploadClick","formData","FormData","append","fetch","password","method","body","then","response","status","current","value","alert","replace","data","console","log","catch","err","error","e","target","files","action"],"sources":["/Users/syedabbasali/Desktop/IndividualProject/submission/FrontendV3/src/components/Profile/ItemUpload.js"],"sourcesContent":["import React, { useState } from 'react';\nimport classes from './UserProfile.module.css';\nimport { useHistory } from 'react-router-dom';\n\nfunction ItemUpload() {\n    const history = useHistory();\n  const [file, setFile] = useState(\"\");\n  const ref = React.useRef();\n\n\n  var username = JSON.parse(localStorage.getItem('userProfile'));\n\n  const handleUploadClick = async () => {\n\n    const formData = new FormData();\n    formData.append('file',file);\n\n    // ðŸ‘‡ Uploading the file using the fetch API to the server\n    await fetch(`http://54.174.0.81:8080/shop/upload_item_list/username=${username.username}/password=${username.password}`, {\n      method: 'POST',\n      body: formData,\n      // ðŸ‘‡ Set headers manually for single file upload\n     \n    })\n      .then((response) => {\n        if(response.status === 200) {\n            ref.current.value = \"\"\n            alert(\"Items Successfully uploaded.\");\n            history.replace('/profile');\n        }\n      })\n      .then((data) => console.log(file))\n      .catch((err) => console.error(err));\n  };\n\n\n\n  return (\n    <div>\n        <h2>Items Upload</h2>\n      <div className=''>\n              <input type=\"file\" onChange={(e)=>setFile(e.target.files[0])} ref={ref} />\n                <br/><br></br>\n              <div className={classes.action}>\n                    <button onClick={handleUploadClick}>Upload</button>\n              </div>\n              \n      </div>\n    </div>\n  );\n}\n\nexport default ItemUpload;"],"mappings":"0bAAA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAOC,QAAO,KAAM,0BAA0B,CAC9C,OAASC,UAAU,KAAQ,kBAAkB,CAAC,wFAE9C,QAASC,WAAU,EAAG,CAClB,GAAMC,QAAO,CAAGF,UAAU,EAAE,CAC9B,cAAwBF,QAAQ,CAAC,EAAE,CAAC,wCAA7BK,IAAI,eAAEC,OAAO,eACpB,GAAMC,IAAG,CAAGR,KAAK,CAACS,MAAM,EAAE,CAG1B,GAAIC,SAAQ,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CAAC,CAE9D,GAAMC,kBAAiB,4FAAG,kJAElBC,QAAQ,CAAG,GAAIC,SAAQ,EAAE,CAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,CAACZ,IAAI,CAAC,CAE5B;AAAA,sBACMa,MAAK,kEAA2DT,QAAQ,CAACA,QAAQ,sBAAaA,QAAQ,CAACU,QAAQ,EAAI,CACvHC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEN,QACN;AAEF,CAAC,CAAC,CACCO,IAAI,CAAC,SAACC,QAAQ,CAAK,CAClB,GAAGA,QAAQ,CAACC,MAAM,GAAK,GAAG,CAAE,CACxBjB,GAAG,CAACkB,OAAO,CAACC,KAAK,CAAG,EAAE,CACtBC,KAAK,CAAC,8BAA8B,CAAC,CACrCvB,OAAO,CAACwB,OAAO,CAAC,UAAU,CAAC,CAC/B,CACF,CAAC,CAAC,CACDN,IAAI,CAAC,SAACO,IAAI,QAAKC,QAAO,CAACC,GAAG,CAAC1B,IAAI,CAAC,GAAC,CACjC2B,KAAK,CAAC,SAACC,GAAG,QAAKH,QAAO,CAACI,KAAK,CAACD,GAAG,CAAC,GAAC,uDACtC,kBArBKnB,kBAAiB,0CAqBtB,CAID,mBACE,oCACI,oCAAqB,cACvB,aAAK,SAAS,CAAC,EAAE,wBACT,cAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAE,kBAACqB,CAAC,QAAG7B,QAAO,CAAC6B,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAC,CAAC,GAAG,CAAE9B,GAAI,EAAG,cACxE,aAAK,2BAAS,cAChB,YAAK,SAAS,CAAEN,OAAO,CAACqC,MAAO,uBACzB,eAAQ,OAAO,CAAExB,iBAAkB,oBAAgB,EACnD,GAER,GACF,CAEV,CAEA,cAAeX,WAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}