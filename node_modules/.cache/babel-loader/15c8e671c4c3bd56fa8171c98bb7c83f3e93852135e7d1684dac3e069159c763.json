{"ast":null,"code":"import _slicedToArray from\"/Users/syedabbasali/Desktop/IndividualProject/submission/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import ProfileForm from'./ProfileForm';import classes from'./UserProfile.module.css';import{useState,useEffect,useRef}from'react';import ItemUpload from'./ItemUpload';import{FaEdit}from\"react-icons/fa\";import EditUser from'./EditUser';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserProfile=function UserProfile(){var ref=useRef(null);var _window=window,tableau=_window.tableau;var url=\"https://public.tableau.com/views/saveMoneyDashboard/Dashboard1\";var options={device:\"desktop\"};function initViz(){new tableau.Viz(ref.current,url,options);}useEffect(function(){initViz();},[]);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isChangePassword=_useState2[0],setisChangePassword=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),profile=_useState4[0],setProfile=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),edit=_useState6[0],setEdit=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),userEdit=_useState8[0],setuserEdit=_useState8[1];useEffect(function(){var items=JSON.parse(localStorage.getItem('userProfile'));fetch(\"http://54.174.0.81:8080/shop/get_shop/username=\".concat(items.username,\"/password=\").concat(items.password),{method:'POST'}).then(function(response){// assumption: Always succeeds!\nreturn response.json();}).then(function(json){setProfile(json);});},[edit]);var ChangePassword=function ChangePassword(){setisChangePassword(true);};var returnProfile=function returnProfile(){setisChangePassword(false);};function editUserDetails(param){setEdit(true);console.log(param);var p=param;setuserEdit(p);}var _userUpdated=function userUpdated(){console.log(\"working\");setEdit(false);};return/*#__PURE__*/_jsxs(\"section\",{className:classes.profile,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Your User Profile\"}),edit&&/*#__PURE__*/_jsx(EditUser,{userEdit:userEdit,userUpdated:function userUpdated(){return _userUpdated();}}),!isChangePassword&&/*#__PURE__*/_jsxs(\"section\",{className:classes.auth,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shop Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.displayFlex,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Username\"}),\": \\xA0\\xA0 \",profile.username]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(FaEdit,{className:classes.edit,onClick:function onClick(){return editUserDetails('Shop Name');},title:\"Edit\"}),\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Shop Name\"}),\": \\xA0\\xA0 \",profile.shop_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(FaEdit,{className:classes.edit,onClick:function onClick(){return editUserDetails('Shop Type');},title:\"Edit\"}),\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Shop Type\"}),\": \\xA0\\xA0 \",profile.shop_type]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(FaEdit,{className:classes.edit,onClick:function onClick(){return editUserDetails('Shop Status');},title:\"Edit\"}),\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Shop Status\"}),\": \\xA0\\xA0 \",profile.shop_status]}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(FaEdit,{className:classes.edit,onClick:function onClick(){return editUserDetails('Shop Address');},title:\"Edit\"}),\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Shop Address\"}),\": \\xA0\\xA0 \",profile.shop_address]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(FaEdit,{className:classes.edit,onClick:function onClick(){return editUserDetails('Shop Postcode');},title:\"Edit\"}),\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Shop Postcode\"}),\": \\xA0\\xA0 \",profile.shop_postcode]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(FaEdit,{className:classes.edit,onClick:function onClick(){return editUserDetails('Latitude');},title:\"Edit\"}),\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Shop Latitude\"}),\": \\xA0\\xA0 \",profile.shop_latitude]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(FaEdit,{className:classes.edit,onClick:function onClick(){return editUserDetails('Longitude');},title:\"Edit\"}),\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Shop Longitude\"}),\": \\xA0\\xA0 \",profile.shop_longitude]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(FaEdit,{className:classes.edit,onClick:function onClick(){return editUserDetails('Shop Crowd');},title:\"Edit\"}),\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Shop Crowd\"}),\": \\xA0\\xA0 \",profile.shop_crowd]})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{margin:\"20px\"}}),/*#__PURE__*/_jsx(ItemUpload,{})]}),!isChangePassword&&/*#__PURE__*/_jsx(\"div\",{className:classes.action,children:/*#__PURE__*/_jsx(\"button\",{onClick:ChangePassword,children:\"Change Password\"})}),isChangePassword&&/*#__PURE__*/_jsx(ProfileForm,{}),isChangePassword&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classes.toggle,onClick:returnProfile,children:\"Return to Profile\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{ref:ref})})]});};export default UserProfile;","map":{"version":3,"names":["ProfileForm","classes","useState","useEffect","useRef","ItemUpload","FaEdit","EditUser","UserProfile","ref","window","tableau","url","options","device","initViz","Viz","current","isChangePassword","setisChangePassword","profile","setProfile","edit","setEdit","userEdit","setuserEdit","items","JSON","parse","localStorage","getItem","fetch","username","password","method","then","response","json","ChangePassword","returnProfile","editUserDetails","param","console","log","p","userUpdated","auth","displayFlex","shop_name","shop_type","shop_status","shop_address","shop_postcode","shop_latitude","shop_longitude","shop_crowd","margin","action","toggle"],"sources":["/Users/syedabbasali/Desktop/IndividualProject/submission/FrontendV3/src/components/Profile/UserProfile.js"],"sourcesContent":["import ProfileForm from './ProfileForm';\nimport classes from './UserProfile.module.css';\nimport { useState, useEffect, useRef } from 'react';\nimport ItemUpload from './ItemUpload';\nimport { FaEdit } from \"react-icons/fa\";\nimport EditUser from './EditUser';\n\nconst UserProfile = () => {\n\n  const ref = useRef(null);\n  const {tableau} = window;\n\n  const  url=\"https://public.tableau.com/views/saveMoneyDashboard/Dashboard1\"\n\n  const options = {\n    device: \"desktop\",\n  }\n\n  function initViz() {\n    new tableau.Viz(ref.current, url, options);\n  }\n\n  useEffect(() => {\n    initViz();\n  },[])\n\n  const [isChangePassword, setisChangePassword] = useState(false);\n  const [profile, setProfile] = useState([]);\n  const [edit, setEdit] = useState(false);\n  const[userEdit, setuserEdit] = useState(\"\");\n\n\n  useEffect(() => {\n    const items = JSON.parse(localStorage.getItem('userProfile'));\n    \n    fetch(`http://54.174.0.81:8080/shop/get_shop/username=${items.username}/password=${items.password}`, {method: 'POST'})\n     .then(response => {\n      // assumption: Always succeeds!\n        return response.json();\n    }).then(json => {\n        setProfile(json);\n    });\n  }, [edit]);\n  \n  const ChangePassword = () => {\n    setisChangePassword(true);\n  }\n\n  const returnProfile = () => {\n    setisChangePassword(false);\n  }\n\n  function editUserDetails(param){\n    setEdit(true);\n    console.log(param);\n    const p = param;\n    setuserEdit(p);\n  }\n\n  const userUpdated = () => {\n    console.log(\"working\");\n    setEdit(false);\n  }\n  \n  return (\n    \n    <section className={classes.profile}>\n\n      <h1>Your User Profile</h1>\n      {edit && \n        <EditUser userEdit={userEdit} userUpdated={()=>userUpdated()} />\n      }\n      \n      {!isChangePassword && (\n        <section className={classes.auth}>\n          <h2>Shop Details</h2>\n          <div className={classes.displayFlex}>\n            <div>\n              <p><b>Username</b>: &nbsp;&nbsp; {profile.username}</p>\n              <p><FaEdit className={classes.edit} onClick={()=>editUserDetails('Shop Name')} title='Edit' /> <b>Shop Name</b>: &nbsp;&nbsp; {profile.shop_name}</p>\n              <p><FaEdit className={classes.edit} onClick={()=>editUserDetails('Shop Type')} title='Edit' /> <b>Shop Type</b>: &nbsp;&nbsp; {profile.shop_type}</p>\n              <p><FaEdit className={classes.edit} onClick={()=>editUserDetails('Shop Status')} title='Edit' /> <b>Shop Status</b>: &nbsp;&nbsp; {profile.shop_status}</p>\n              <br></br>\n              </div>\n            <div>\n              <p><FaEdit className={classes.edit} onClick={()=>editUserDetails('Shop Address')} title='Edit' /> <b>Shop Address</b>: &nbsp;&nbsp; {profile.shop_address}</p>\n              <p><FaEdit className={classes.edit} onClick={()=>editUserDetails('Shop Postcode')} title='Edit' /> <b>Shop Postcode</b>: &nbsp;&nbsp; {profile.shop_postcode}</p>\n              <p><FaEdit className={classes.edit} onClick={()=>editUserDetails('Latitude')} title='Edit' /> <b>Shop Latitude</b>: &nbsp;&nbsp; {profile.shop_latitude}</p>\n              <p><FaEdit className={classes.edit} onClick={()=>editUserDetails('Longitude')} title='Edit' /> <b>Shop Longitude</b>: &nbsp;&nbsp; {profile.shop_longitude}</p>\n              <p><FaEdit className={classes.edit} onClick={()=>editUserDetails('Shop Crowd')} title='Edit' /> <b>Shop Crowd</b>: &nbsp;&nbsp; {profile.shop_crowd}</p>\n            </div>\n          </div>\n          <hr style={{margin: \"20px\"}}></hr>\n          <ItemUpload />\n        </section>\n      )}\n      {!isChangePassword && (\n        <div className={classes.action}>\n          <button onClick={ChangePassword}>Change Password</button>\n        </div>\n      )}\n      {isChangePassword && (\n        <ProfileForm />\n      )}\n      {isChangePassword && (\n        \n          <button\n            type='button'\n            className={classes.toggle}\n            onClick={returnProfile}\n            >\n            Return to Profile\n          </button>\n        \n      )}\n      \n      <br />\n      <hr />\n        <div>\n          <div ref={ref}></div>\n        </div>\n\n      \n      \n    </section>\n   \n  );\n};\n\nexport default UserProfile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}